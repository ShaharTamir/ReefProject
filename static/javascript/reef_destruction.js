end_pos = [
{ 'width': '17.44px', 'height': '14.05px', 'left': '612.61px', 'top': '396.80px' }, { 'width': '18.33px', 'height': '18.23px', 'left': '838.65px', 'top': '171.59px' }, { 'width': '27.38px', 'height': '82.01px', 'left': '649.27px', 'top': '323.98px' },
{ 'width': '17.64px', 'height': '32.29px', 'left': '584.07px', 'top': '548.64px' }, { 'width': '23.96px', 'height': '18.24px', 'left': '595.41px', 'top': '445.21px' }, { 'width': '39.30px', 'height': '40.39px', 'left': '637.16px', 'top': '469.09px' },
{ 'width': '31.82px', 'height': '35.47px', 'left': '697.39px', 'top': '337.08px' }, { 'width': '54.04px', 'height': '90.84px', 'left': '1010.89px', 'top': '161.35px' }, { 'width': '27.18px', 'height': '16.98px', 'left': '696.63px', 'top': '283.49px' },
{ 'width': '81.38px', 'height': '70.91px', 'left': '704.75px', 'top': '240.51px' }, { 'width': '40.89px', 'height': '37.51px', 'left': '710.70px', 'top': '304.71px' }, { 'width': '22.85px', 'height': '39.45px', 'left': '911.44px', 'top': '213.54px' },
{ 'width': '27.00px', 'height': '68.63px', 'left': '783.84px', 'top': '207.40px' }, { 'width': '23.27px', 'height': '17.15px', 'left': '647.54px', 'top': '526.13px' }, { 'width': '14.12px', 'height': '23.83px', 'left': '652.13px', 'top': '423.14px' },
{ 'width': '75.67px', 'height': '88.81px', 'left': '853.11px', 'top': '175.13px' }, { 'width': '24.83px', 'height': '50.93px', 'left': '753.24px', 'top': '215.44px' }, { 'width': '90.59px', 'height': '72.31px', 'left': '948.10px', 'top': '163.25px' },
{ 'width': '13.57px', 'height': '63.83px', 'left': '590.36px', 'top': '476.77px' }, { 'width': '8.55px', 'height': '10.86px', 'left': '744.17px', 'top': '228.48px' }, { 'width': '7.99px', 'height': '218.54px', 'left': '681.22px', 'top': '278.24px' },
{ 'width': '26.90px', 'height': '42.61px', 'left': '947.44px', 'top': '152.87px' }, { 'width': '36.49px', 'height': '34.20px', 'left': '639.99px', 'top': '575.88px' }, { 'width': '124.70px', 'height': '169.96px', 'left': '785.21px', 'top': '146.88px' },
{ 'width': '49.86px', 'height': '274.66px', 'left': '600.90px', 'top': '361.67px' }, { 'width': '32.56px', 'height': '30.61px', 'left': '1256.25px', 'top': '582.41px' }, { 'width': '65.45px', 'height': '93.39px', 'left': '1276.12px', 'top': '468.39px' },
{ 'width': '34.99px', 'height': '36.99px', 'left': '1246.07px', 'top': '371.20px' }, { 'width': '24.43px', 'height': '22.28px', 'left': '1328.63px', 'top': '473.16px' }, { 'width': '34.32px', 'height': '35.24px', 'left': '1305.21px', 'top': '433.84px' },
{ 'width': '23.72px', 'height': '66.86px', 'left': '1320.13px', 'top': '567.64px' }, { 'width': '136.06px', 'height': '146.10px', 'left': '1215.65px', 'top': '378.65px' }, { 'width': '7.39px', 'height': '7.49px', 'left': '1298.53px', 'top': '379.44px' },
{ 'width': '20.52px', 'height': '26.71px', 'left': '1275.51px', 'top': '335.95px' }, { 'width': '8.64px', 'height': '51.72px', 'left': '1260.40px', 'top': '517.87px' }, { 'width': '43.96px', 'height': '20.27px', 'left': '1275.97px', 'top': '398.39px' },
{ 'width': '76.38px', 'height': '189.35px', 'left': '1253.51px', 'top': '462.50px' }, { 'width': '16.69px', 'height': '17.61px', 'left': '1281.11px', 'top': '616.70px' }, { 'width': '26.28px', 'height': '24.13px', 'left': '1197.98px', 'top': '330.03px' },
{ 'width': '21.47px', 'height': '18.59px', 'left': '1165.17px', 'top': '307.00px' }, { 'width': '77.94px', 'height': '36.77px', 'left': '1167.32px', 'top': '260.99px' }, { 'width': '23.39px', 'height': '39.69px', 'left': '1101.91px', 'top': '185.70px' },
{ 'width': '73.12px', 'height': '27.69px', 'left': '1145.91px', 'top': '237.13px' }, { 'width': '12.35px', 'height': '11.69px', 'left': '1215.75px', 'top': '312.81px' }, { 'width': '24.99px', 'height': '60.99px', 'left': '1128.62px', 'top': '191.71px' },
{ 'width': '30.88px', 'height': '36.09px', 'left': '1082.86px', 'top': '233.17px' }, { 'width': '163.73px', 'height': '45.61px', 'left': '1099.11px', 'top': '273.66px' }, { 'width': '76.50px', 'height': '32.72px', 'left': '729.48px', 'top': '770.79px' },
{ 'width': '79.60px', 'height': '59.96px', 'left': '643.11px', 'top': '636.49px' }, { 'width': '66.62px', 'height': '28.86px', 'left': '879.94px', 'top': '825.69px' }, { 'width': '28.35px', 'height': '37.03px', 'left': '630.09px', 'top': '691.26px' },
{ 'width': '52.15px', 'height': '75.87px', 'left': '652.59px', 'top': '716.33px' }, { 'width': '46.91px', 'height': '26.08px', 'left': '787.41px', 'top': '853.23px' }, { 'width': '51.58px', 'height': '31.13px', 'left': '827.19px', 'top': '815.73px' },
{ 'width': '19.54px', 'height': '46.35px', 'left': '929.16px', 'top': '865.91px' }, { 'width': '160.21px', 'height': '72.73px', 'left': '743.78px', 'top': '814.56px' }, { 'width': '237.69px', 'height': '146.07px', 'left': '618.32px', 'top': '661.25px' },
{ 'width': '19.08px', 'height': '23.27px', 'left': '854.47px', 'top': '881.97px' }, { 'width': '28.92px', 'height': '24.90px', 'left': '1027.38px', 'top': '822.29px' }, { 'width': '57.46px', 'height': '90.88px', 'left': '1158.52px', 'top': '709.15px' },
{ 'width': '31.13px', 'height': '21.09px', 'left': '1006.51px', 'top': '858.44px' }, { 'width': '68.78px', 'height': '58.48px', 'left': '1239.71px', 'top': '681.16px' }, { 'width': '47.31px', 'height': '71.08px', 'left': '1057.02px', 'top': '830.73px' },
{ 'width': '73.31px', 'height': '88.49px', 'left': '1103.97px', 'top': '798.65px' }, { 'width': '7.94px', 'height': '14.12px', 'left': '1226.56px', 'top': '779.23px' }, { 'width': '10.84px', 'height': '17.95px', 'left': '1044.21px', 'top': '888.58px' },
{ 'width': '55.01px', 'height': '203.75px', 'left': '1191.91px', 'top': '638.23px' }, { 'width': '10.18px', 'height': '19.83px', 'left': '1064.46px', 'top': '804.35px' }, { 'width': '19.79px', 'height': '19.36px', 'left': '1249.91px', 'top': '751.49px' },
{ 'width': '17.87px', 'height': '19.30px', 'left': '974.12px', 'top': '895.65px' }, { 'width': '15.65px', 'height': '23.75px', 'left': '987.78px', 'top': '856.99px' }, { 'width': '141.94px', 'height': '150.30px', 'left': '1000.11px', 'top': '772.09px' },
{ 'width': '32.87px', 'height': '21.69px', 'left': '981.55px', 'top': '826.87px' }, { 'width': '24.89px', 'height': '13.76px', 'left': '1247.50px', 'top': '659.94px' }, { 'width': '14.96px', 'height': '11.49px', 'left': '1237.27px', 'top': '731.17px' },
{ 'width': '41.03px', 'height': '36.37px', 'left': '1286.96px', 'top': '656.32px' },
];

start_pos = [
{'width': '20.8px', 'height': '16.76px', 'left': '146px', 'top': '64px'}, {'width': '21.86px', 'height': '21.74px', 'left': '791px', 'top': '34px'}, {'width': '32.66px', 'height': '97.83px', 'left': '1359.75px', 'top': '-25px', 'transform': 'rotate(34.74deg)'},
{'width': '21.05px', 'height': '38.52px', 'left': '50px', 'top': '604px'}, {'width': '28.58px', 'height': '21.76px', 'left': '43px', 'top': '327px'}, {'width': '46.88px', 'height': '48.18px', 'left': '43px', 'top': '895px'},
{'width': '37.95px', 'height': '42.31px', 'left': '129px', 'top': '752px'}, {'width': '64.46px', 'height': '108.36px', 'left': '332px', 'top': '939px'}, {'width': '32.42px', 'height': '20.26px', 'left': '608px', 'top': '32px'},
{'width': '97.08px', 'height': '84.59px', 'left': '398.63px', 'top': '-6px', 'transform': 'rotate(21.23deg)'}, {'width': '48.78px', 'height': '44.75px', 'left': '206px', 'top': '130px'}, {'width': '27.26px', 'height': '47.06px', 'left': '1232px', 'top': '40px'},
{'width': '32.21px', 'height': '81.88px', 'left': '1612.61px', 'top': '30.17px', 'transform': 'rotate(27.69deg)'}, {'width': '27.76px', 'height': '20.45px', 'left': '65px', 'top': '169px'}, {'width': '16.84px', 'height': '28.43px', 'left': '1776px', 'top': '165px'},
{'width': '90.26px', 'height': '105.94px', 'left': '33px', 'top': '944px'}, {'width': '29.62px', 'height': '60.75px', 'left': '320px', 'top': '88px'}, {'width': '108.06px', 'height': '86.26px', 'left': '1859.72px', 'top': '919px', 'transform': 'rotate(83.61deg)'},
{'width': '16.19px', 'height': '76.15px', 'left': '1322px', 'top': '993px'}, {'width': '10.2px', 'height': '12.96px', 'left': '1375px', 'top': '88px'}, {'width': '9.53px', 'height': '260.7px', 'left': '33px', 'top': '46.77px', 'transform': 'rotate(-45.31deg)'},
{'width': '32.09px', 'height': '50.84px', 'left': '1871.86px', 'top': '494px', 'transform': 'rotate(53.50deg)'}, {'width': '43.53px', 'height': '40.8px', 'left': '33px', 'top': '443px'}, {'width': '148.76px', 'height': '202.75px', 'left': '1781.29px', 'top': '-29.80px', 'transform': 'rotate(13.78deg)'},
{'width': '59.48px', 'height': '327.65px', 'left': '-25.64px', 'top': '570px', 'transform': 'rotate(57.93deg)'}, {'width': '38.84px', 'height': '36.52px', 'left': '1518px', 'top': '1003px'}, {'width': '78.08px', 'height': '111.41px', 'left': '675.78px', 'top': '994px', 'transform': 'rotate(37.47deg)'},
{'width': '41.74px', 'height': '44.13px', 'left': '1851px', 'top': '108px'}, {'width': '29.14px', 'height': '26.57px', 'left': '1806px', 'top': '790px'}, {'width': '40.94px', 'height': '42.04px', 'left': '1652px', 'top': '906px'},
{'width': '28.3px', 'height': '79.76px', 'left': '1856.67px', 'top': '329px', 'transform': 'rotate(71.58deg)'}, {'width': '162.31px', 'height': '174.29px', 'left': '-39px', 'top': '408.05px', 'transform': 'rotate(-35.41deg)'}, {'width': '8.82px', 'height': '8.93px', 'left': '1509px', 'top': '99px'},
{'width': '24.48px', 'height': '31.86px', 'left': '1678px', 'top': '45px'}, {'width': '10.31px', 'height': '61.7px', 'left': '184.73px', 'top': '258.77px', 'transform': 'rotate(116.75deg)'}, {'width': '52.44px', 'height': '24.18px', 'left': '1641px', 'top': '130px'},
{'width': '91.11px', 'height': '225.89px', 'left': '1517.78px', 'top': '1154.90px', 'transform': 'rotate(174.65deg)'}, {'width': '19.91px', 'height': '21.0px', 'left': '1858px', 'top': '576px'}, {'width': '31.35px', 'height': '28.79px', 'left': '1733px', 'top': '239px'},
{'width': '25.61px', 'height': '22.17px', 'left': '1738px', 'top': '832px'}, {'width': '92.98px', 'height': '43.86px', 'left': '1170.74px', 'top': '1012px', 'transform': 'rotate(77deg)'}, {'width': '27.9px', 'height': '47.34px', 'left': '1738px', 'top': '32px'},
{'width': '87.22px', 'height': '33.04px', 'left': '1181.59px', 'top': '-30.30px', 'transform': 'rotate(96.43deg)'}, {'width': '14.74px', 'height': '13.94px', 'left': '1816px', 'top': '44px'}, {'width': '29.81px', 'height': '72.76px', 'left': '858.97px', 'top': '-14.24px', 'transform': 'rotate(-25.12deg)'},
{'width': '36.84px', 'height': '43.05px', 'left': '227.99px', 'top': '1033.46px', 'transform': 'rotate(156.42deg)'}, {'width': '195.32px', 'height': '54.41px', 'left': '1752px', 'top': '728px'}, {'width': '91.26px', 'height': '39.04px', 'left': '717.67px', 'top': '-25px', 'transform': 'rotate(69.94deg)'},
{'width': '94.95px', 'height': '71.53px', 'left': '-39px', 'top': '553.14px', 'transform': 'rotate(-40.09deg)'}, {'width': '79.48px', 'height': '34.42px', 'left': '1865.86px', 'top': '835px', 'transform': 'rotate(31.25deg)'}, {'width': '33.81px', 'height': '44.18px', 'left': '131px', 'top': '314px'},
{'width': '62.21px', 'height': '90.51px', 'left': '180px', 'top': '-14.63px', 'transform': 'rotate(-8.66deg)'}, {'width': '55.96px', 'height': '31.11px', 'left': '799px', 'top': '1058.83px', 'transform': 'rotate(-98.22deg)'}, {'width': '61.53px', 'height': '37.14px', 'left': '983px', 'top': '30px'},
{'width': '23.3px', 'height': '55.29px', 'left': '1004px', 'top': '1036px'}, {'width': '191.12px', 'height': '86.77px', 'left': '450.71px', 'top': '-55px', 'transform': 'rotate(40.81deg)'}, {'width': '283.55px', 'height': '174.26px', 'left': '2009.60px', 'top': '369.49px', 'transform': 'rotate(125.60deg)'},
{'width': '22.76px', 'height': '27.76px', 'left': '447px', 'top': '1017px'}, {'width': '34.5px', 'height': '29.71px', 'left': '1757px', 'top': '1003px'}, {'width': '68.55px', 'height': '108.42px', 'left': '23.43px', 'top': '789px', 'transform': 'rotate(35.16deg)'},
{'width': '37.13px', 'height': '25.16px', 'left': '262px', 'top': '978px'}, {'width': '82.05px', 'height': '69.77px', 'left': '1806px', 'top': '255.12px', 'transform': 'rotate(-70.04deg)'}, {'width': '56.44px', 'height': '84.8px', 'left': '66.24px', 'top': '218.58px', 'transform': 'rotate(99.90deg)'},
{'width': '87.46px', 'height': '105.56px', 'left': '1692.82px', 'top': '988.62px', 'transform': 'rotate(95.78deg)'}, {'width': '9.47px', 'height': '16.85px', 'left': '1781px', 'top': '533px'}, {'width': '12.93px', 'height': '21.41px', 'left': '111px', 'top': '1012px'},
{'width': '65.62px', 'height': '243.06px', 'left': '522.53px', 'top': '1159.93px', 'transform': 'rotate(-169.54deg)'}, {'width': '12.14px', 'height': '23.65px', 'left': '905px', 'top': '1012px'}, {'width': '23.61px', 'height': '23.09px', 'left': '1844px', 'top': '949px'},
{'width': '21.31px', 'height': '23.02px', 'left': '71px', 'top': '750px'}, {'width': '18.67px', 'height': '28.33px', 'left': '225px', 'top': '895px'}, {'width': '169.33px', 'height': '179.3px', 'left': '1397px', 'top': '-24.83px', 'transform': 'rotate(-8.89deg)'},
{'width': '39.21px', 'height': '25.88px', 'left': '1365px', 'top': '1014px'}, {'width': '29.69px', 'height': '16.42px', 'left': '1793px', 'top': '608px'}, {'width': '17.85px', 'height': '13.7px', 'left': '1793px', 'top': '895px'},
{'width': '48.94px', 'height': '43.39px', 'left': '1840px', 'top': '683.59px', 'transform': 'rotate(-31.53deg)'}
];

vectors = [
'vector-0','vector-1','vector-2','vector-3','vector-4','vector-5',
'vector-6','vector-7','vector-8','vector-9','vector-10','vector-11',
'vector-12','vector-13','vector-14','vector-15','vector-16','vector-17',
'vector-18','vector-19','vector-20','vector-21','vector-22','vector-23',
'vector-24','vector-25','vector-26','vector-27','vector-28','vector-29',
'vector-30','vector-31','vector-32','vector-33','vector-34','vector-35',
'vector-36','vector-37','vector-38','vector-39','vector-40','vector-41',
'vector-42','vector-43','vector-44','vector-45','vector-46','vector-47',
'vector-48','vector-49','vector-50','vector-51','vector-52','vector-53',
'vector-54','vector-55','vector-56','vector-57','vector-58','vector-59',
'vector-60','vector-61','vector-62','vector-63','vector-64','vector-65',
'vector-66','vector-67','vector-68','vector-69','vector-70','vector-71',
'vector-72','vector-73','vector-74','vector-75',
]

const DONT_CARE = 200;
var is_down = false;
var seconds = 0;
var dead_reefs_per_sec = 250;
var is_faded = false;

function incrementSeconds() {
    var el = document.getElementById('dead-coral-count');
    seconds += 1;
    el.innerText = dead_reefs_per_sec * seconds;
}

setInterval(incrementSeconds, 1000);
down = [[{"top": "-500px"},{"top": "0px"}], {duration: 1000, easing: "ease-in", fill: "forwards"}];
up = [[{"top": "-1000px"}], {duration: 2000}];
show = [[{"opacity": 1}], {duration: 1000, fill: "forwards"}];
hide = [[{"opacity": 0}], {duration: 600, fill: "forwards"}];

function assemble_circle(assemble) {
    elements = vectors.map(i => document.getElementById(i));
    background = document.getElementById('background-image');
    blur_circle = document.getElementById('blur-circle');
    press_op = document.getElementById('press-options');
    arrow_up = document.getElementById('arrow-up');
    arrow_down = document.getElementById('arrow-down');

    if(assemble) {
        for (elem in elements) {
            elements[elem].animate([end_pos[elem]], {duration: 1000, easing: "ease-in-out", fill: "forwards"});
            elements[elem].animate([{"filter":"grayscale(0)", "opacity": "1", "transform": "rotate(0)"}], {duration: 1200, fill: "forwards"});
        }

        document.getElementById("s1").animate(up[0], up[1]);
        background.animate(show[0], show[1]);
        blur_circle.animate(show[0], show[1]);
        press_op.animate(show[0], show[1]);
        background.style.zIndex = 5;
        press_op.style.zIndex = 20;
        arrow_down.animate(hide[0], hide[1]);
        arrow_up.animate(show[0], show[1]);
    } else {
        if (is_faded) {
            accent_group(0);
        }
        for (elem in elements) {
            elements[elem].animate([start_pos[elem]], {duration: 1000, easing: "ease-in-out", fill: "forwards"});
            elements[elem].animate([{"filter":"grayscale(100)", "opacity": "0.05"}], {duration: 1200, fill: "forwards"});
        }

        background.animate(hide[0], hide[1]);
        document.getElementById("s1").animate(down[0], down[1]);
        blur_circle.animate(hide[0], hide[1]);
        press_op.animate(hide[0], hide[1]);
        arrow_down.animate(show[0], show[1]);
        arrow_up.animate(hide[0], hide[1]);
    }

    is_down = assemble;
}

function blur_shine(group_num, is_in) {
    if(is_down == false) {
        return;
    }

    circle_shapes_ids = ["blur-0", "blur-1", "blur-2", "blur-3", "blur-4"];
    elements = circle_shapes_ids.map(i => document.getElementById(i));
    opacity = is_in ? 0.5 : 0.3;

    elements[group_num].style.opacity = opacity;
}

function accent_group(group_num) {
    if (is_down == false) {
        return;
    }

    circle_shapes_ids = ["blur-0", "blur-1", "blur-2", "blur-3", "blur-4"];
    precentages_ids = ["precentage-container-0", "precentage-container-1", "precentage-container-2",
                       "precentage-container-3", "precentage-container-4"];
    vector_groups = ["vector-group-0", "vector-group-1", "vector-group-2", "vector-group-3", "vector-group-4"];
    press_ids = ["press-0", "press-1", "press-2", "press-3", "press-4"];
    info_ids = ["info-0", "info-1", "info-2", "info-3", "info-4"];
    circle_glow_elems = circle_shapes_ids.map(i => document.getElementById(i));
    vector_group_lists = vector_groups.map(i => document.getElementsByClassName(i));
    press_ops = press_ids.map(i => document.getElementById(i));
    precentages = precentages_ids.map(i => document.getElementById(i));
    infos_container = info_ids.map(i => document.getElementById(i));
    infos_rise_container = document.getElementsByClassName("info-animate-container");
    main_info = document.getElementById("main-title");

    if (is_faded) {
        main_instruct = document.getElementById("main-animate-container");
        main_info.animate([{"opacity": "1"}], {duration: 1000, fill:"forwards"});
        main_instruct.animate(
            [
                {"top": "-20px"},
                {"top": "0px"}
            ],
            {duration: 500, fill: "forwards"}
        );
        for(i = 0; i < vector_groups.length; ++i) {
            infos_container[i].animate([{"opacity": "0"}], {duration: 500, fill:"forwards"});
            for(v = 0; v < vector_group_lists[i].length; ++v) {
                vector_group_lists[i][v].animate(
                    [{"opacity": "1", "filter": "saturate(100%)"}],
                    {duration: 500, fill: "forwards"}
                );
            }
            circle_glow_elems[i].animate(
                [{"opacity": "0.3", "filter": "saturate(100%) blur(2em)"}],
                {duration: 500, fill: "forwards"}
            );
            press_ops[i].animate(
                [{"opacity": "1"}],
                {duration: 500, fill: "forwards"}
            );
            precentages[i].animate([{"opacity": "0"}], {duration: 500, fill:"forwards"});
        }
    }
    else {
        if(group_num == DONT_CARE )
            return;
        main_info.animate([{"opacity": "0"}], {duration: 500, fill:"forwards"});
        for(i = 0; i < vector_groups.length; ++i) {
            if (i != group_num) {
                for(v = 0; v < vector_group_lists[i].length; ++v) {
                    vector_group_lists[i][v].animate(
                        [{"opacity": "0.1", "filter": "saturate(0%)"}],
                        {duration: 500, fill: "forwards"}
                    );
                }
                circle_glow_elems[i].animate(
                    [{"opacity": "0", "filter": "saturate(0%) blur(20px)"}],
                    {duration: 500, fill: "forwards"}
                );
                press_ops[i].animate(
                    [{"opacity": "0"}],
                    {duration: 500, fill:"forwards"}
                );
            } else {
                precentages[i].animate([{"opacity": "1"}], {duration: 500, fill:"forwards"});
                infos_container[i].animate([{"opacity": "1"}], {duration: 1000, fill:"forwards"});
                infos_rise_container[i].animate(
                    [
                        {"bottom": "-30px"},
                        {"bottom": "0px"}
                    ],
                    {duration: 1000, easing: "ease-in-out", fill: "forwards"}
                );
            }
        }
    }
    is_faded = !is_faded;
}


